(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{257:function(t,e,n){"use strict";n.r(e);n(38);var i,o,a=n(8),s=n.n(a),r=n(7),c=n.n(r),u=n(11),h={data:function(){return{showGeoTips:!1,waitGeoInit:!1}},computed:{hasTipToShow:function(){return this.showGeoTips||this.waitGeoInit}},mounted:function(){this.initLocation()},methods:c()({},Object(u.c)(["centerMap","zoomMap"]),{checkGeoPermission:(o=s()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(navigator.permissions){t.next=2;break}return t.abrupt("return",void 0);case 2:return t.next=4,navigator.permissions.query({name:"geolocation"});case 4:return e=t.sent,t.abrupt("return",e.state);case 6:case"end":return t.stop()}},t,this)})),function(){return o.apply(this,arguments)}),initLocation:(i=s()(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("geolocation"in navigator){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.checkGeoPermission();case 4:"granted"===(e=t.sent)?this.getLocation():"prompt"===e&&setTimeout(function(){n.showGeoTips=!0},500);case 6:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)}),getLocation:function(){var t=this;this.showGeoTips=!1,this.waitGeoInit=!0,navigator.geolocation.getCurrentPosition(function(e){t.centerMap([e.coords.latitude,e.coords.longitude]),t.zoomMap(14),setTimeout(function(){t.waitGeoInit=!1},300)},function(e){1===e.code&&alert("被拒絕了 T___T 請重開瀏覽器，或解除位置存取的封鎖"),t.waitGeoInit=!1})}})},p=n(1),w=Object(p.a)(h,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("transition",{attrs:{name:"fade"}},[t.hasTipToShow?n("div",{staticClass:"absolute absolute--fill flex items-center justify-center bg-black-30 z-9999"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showGeoTips,expression:"showGeoTips"}],staticClass:"bg-white tc pa3 br2 shadow-1"},[n("h2",{staticClass:"f3 mt3 mb4 normal"},[t._v("嘿，來看看附近有哪些看板？")]),n("div",{staticClass:"flex justify-around"},[n("button",{staticClass:"br2 ba bg-near-white w-50 pa3 pointer hover-bg-light-gray",on:{click:function(e){t.showGeoTips=!1}}},[t._v("讓我自己逛逛")]),n("button",{staticClass:"br2 ba w-40 bg-green white pointer hover-bg-dark-green",on:{click:t.getLocation}},[t._v("跳到我附近")])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.waitGeoInit,expression:"waitGeoInit"}],staticClass:"ba bg-white w5 tc pa3"},[n("h2",{staticClass:"f3 mv4"},[t._v("地圖定位中..")])])]):t._e()])],1)},[],!1,null,null,null);w.options.__file="index.vue";e.default=w.exports}}]);